"0","orgs_clean <- users_gh %>%"
"0","  # remove all na's "
"0","  drop_na(company) %>% "
"0","  # convert to lower case "
"0","  dt_mutate(organization = str_to_lower(company)) %>%"
"0","  # remove @ from start of names "
"0","  dt_mutate(organization = str_replace_all(organization, ""@"", "" "")) %>% "
"0","  # remove uninformative words ""inc."" and ""the"""
"0","  dt_mutate(organization = str_replace_all(organization, ""\\b(, inc\\.|, inc| inc\\.| inc|\\.$)\\b"", """")) %>%"
"0","  dt_mutate(organization = str_replace_all(organization, ""\\b(the )\\b"", """")) %>%"
"0","  # expand abbreviations ""univ."" and ""iit"""
"0","  dt_mutate(organization = str_replace_all(organization, ""\\b(univ\\.|univ)\\b"", ""university"")) %>%"
"0","  dt_mutate(organization = str_replace_all(organization, ""\\b(iit)\\b"", ""indian institute of technology,"")) %>%"
"0","  dt_mutate(organization = str_trim(organization)) %>% "
"0","  # classifying students"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(student)\\b""), "
"0","                              yes = ""misc. student"", no = organization)) %>%"
"0","  # universities and research institutes "
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(duke university|duke|duke university libraries|dukeuniversity)\\b""), "
"0","                              yes = ""duke university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","  pattern = ""\\b(?i)(stanford university|stanford|stanfordmlgroup|stanfordvl|stanfordgeospatialcenter|stanfordhci|stanfordjournalism|stanfordmsl|stanfordnlp)\\b""), "
"0","                              yes = ""stanford university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(massachusetts institute of technology|mit|mitmedialab|mit media lab)\\b""), "
"0","                              yes = ""massachusetts institute of technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(harvard medical school|harvard|harvard university|harvardagileroboticslab|harvardnlp|harvardx)\\b""), "
"0","                              yes = ""harvard university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^princeton university|princeton university$|princetonuniversity|princeton)\\b""), "
"0","                              yes = ""princeton university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","  pattern = ""\\b(?i)(^columbia university|columbia university$|barnard college|columbia-university)\\b""), "
"0","                              yes = ""columbia university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","  pattern = ""\\b(?i)(^northeastern university|northeastern university$|northeastern)\\b""), "
"0","                              yes = ""northeastern university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","  pattern = ""\\b(?i)(^northwestern university|northwestern university$|northwestern)\\b""), "
"0","                              yes = ""northwestern university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","  pattern = ""\\b(?i)(^cornell university|cornell university$|northwestern|^cornell tech|cornell tech$|cornelltech|^weill cornell|weill cornell$|weill cornell medicine$|cornell|cornell lab of ornithology|cornell-dti|cornell-rpal|cornell asl|weillcornell nygenome|cornell cs|cornell unveristy|cs, cornell)\\b""), "
"0","                              yes = ""cornell university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","  pattern = ""\\b(?i)(carnegie mellon|carnegie mellon university|carnegie mellon university software engineering institute|carnegie mellon university, silicon valley|cmu)\\b""), "
"0","                              yes = ""carnegie mellon university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(john hopkins|john hopkins university|johns hopkins university applied physics laboratory)\\b""), "
"0","                              yes = ""john hopkins university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(penn|upenn|pennlabs|university of pennsylvania|the university of pennsylvania|penn medicine)\\b""), "
"0","                              yes = ""university of pennsylvania"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","  pattern = ""\\b(?i)(university of washington|university of washington(?! state)|univerisity of washington|univeristy of washington|universityofwashington|univesity of washington)\\b""),"
"0","                              yes = ""university of washington"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization,"
"0","                              pattern = ""\\b(?i)(university of california, san francisco|uc san francisco|university of california san francisco|ucsf)\\b""),"
"0","                              yes = ""university of california, san francisco"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization,"
"0","                              pattern = ""\\b(?i)(university of california santa barbara|uc santa barbara|ucsb)\\b""),"
"0","                              yes = ""university of california, santa barbara"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization,"
"0","                              pattern = ""\\b(?i)(university of california irvine|university of california, irvine|uc irvine)\\b""),"
"0","                              yes = ""university of california, irvine"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization,"
"0","                              pattern = ""\\b(?i)(university of california davis|university of california, davis|uc davis)\\b""),"
"0","                              yes = ""university of california, davis"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization,"
"0","                              pattern = ""\\b(?i)(ucla|university of california los angeles|university of california, los angeles)\\b""),"
"0","                              yes = ""university of california, los angeles"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization,"
"0","                              pattern = ""\\b(?i)(university of california berkeley|uc berkeley|university of california, berkeley)\\b""),"
"0","                              yes = ""university of california, berkeley"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization,"
"0","                              pattern = ""\\b(?i)(university of california, san diego|university of california san diego|ucsd|uc san diego)\\b""),"
"0","                              yes = ""university of california, san diego"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^california state|california state$|california state university$|^california polytechnic|california polytechnic$)\\b""), "
"0","                              yes = ""california state university system"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^georgia institute of technology|^georgia tech|georgia institute of technology$|georgia tech$)\\b""), "
"0","                              yes = ""georgia institute of technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of british columbia|ubc)\\b""), "
"0","                              yes = ""university of british columbia"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(indiana university|indiana university bloomington|indiana university, bloomington)\\b""), "
"0","                              yes = ""indiana university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of texas at austin|university of texas|the university of texas at austin)\\b""), "
"0","                              yes = ""university of texas at austin"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^texas a&m|^texas a & m|texas a&m university)\\b""), "
"0","                              yes = ""texas a&m university - college station"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of college london|ucl|university college london)\\b""), "
"0","                              yes = ""university college london, university of london"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(new york university|nyu|nyulibraries|nyueserv|itpnyu)\\b""), "
"0","                              yes = ""new york university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(penn state|penn state university|pennsylvania state university|the pennsylvania state university|pennstate)\\b""), "
"0","                              yes = ""pennsylvania state university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","  pattern = ""\\b(?i)(fred hutchinson cancer research center|fredhutch|fred hutch|fred hutchinson|fred hutchinson center|fred hutch cancer research center)\\b""), "
"0","                              yes = ""fred hutchinson cancer research center"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(shanghai jiao tong university|sjtu|jiao tong university|jiao tong)\\b""), "
"0","                              yes = ""shanghai jiaotong university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^tsinghua|tsinghua$|tsinghua university$|tsinghua univ$|tsinghua unviersity|tsinghuauniversity|tsinghua_university|tsinghuau)\\b""), "
"0","                              yes = ""tsinghua university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of michigan|university of michigan$|^the university of michigan|university of michigan, ann arbor)\\b""), "
"0","                              yes = ""university of michigan - ann arbor"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of virginia|university of virginia$|^uva|uva$)\\b""), "
"0","                              yes = ""university of virginia, charlottesville"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^virginia tech|virginia tech$|virginia tech university$|^Virginia Polytechnic)\\b""), "
"0","                              yes = ""virginia polytechnic institute and state university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of tokyo|^the university of tokyo|university of tokyo$)\\b""), "
"0","                              yes = ""university of tokyo"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of waterloo|^the university of waterloo|university of waterloo$)\\b""), "
"0","                              yes = ""university of waterloo"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^zhejiang|zhejiang university$|zju)\\b""), "
"0","                              yes = ""zhejiang university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of toronto|university of toronto$)\\b""), "
"0","                              yes = ""university of toronto"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^imperial college london|imperial college london$)\\b""), "
"0","                              yes = ""imperial college london"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of cambridge|university of cambridge$|^cambridge university|cambridge university$)\\b""), "
"0","                              yes = ""university of cambridge"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of oxford|university of oxford$|^oxford university|oxford university$|^the university of oxford|^university of oxford,)\\b""), "
"0","                              yes = ""university of oxford"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^peking university|peking university$|^peking university,)\\b""), "
"0","                              yes = ""peking university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of southern california|university of southern california$|^university of southern california,|usc)\\b""), "
"0","                              yes = ""university of southern california"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^nanjing university|^nanjing univ|nanjing university$|^nanjing university,|nju)\\b""), "
"0","                              yes = ""nanjing university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of edinburgh|university of edinburgh$|^the university of edinburgh)\\b""), "
"0","                              yes = ""university of edinburgh"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^purdue university|^purdue university,|purdue university$|department of statistics,purdue university|purdue univeristy)\\b""), "
"0","                              yes = ""purdue university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of florida|^university of florida,|university of florida$|universityofflorida)\\b""), "
"0","                              yes = ""university of florida"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of chicago|^university of chicago,|^the university of chicago|university of chicago$|^uchicago|uchicago$|^u of chicago|u of chicago$)\\b""), "
"0","                              yes = ""university of chicago"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of illinois at chicago|university of illinois chicago|university of illinois, chicago)\\b""), "
"0","                              yes = ""university of illinois at chicago"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of illinois at springfield|university of illinois springfield|university of illinois, springfield)\\b""), "
"0","                              yes = ""university of illinois at springfield"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of illinois|university of illinois at urbana-champaign|university of illinois urbana-champaign|university of illinois, urbana-champaign|university of illinois at urbana champaign|uiuc)\\b""), "
"0","                              yes = ""university of illinois at urbana-champaign"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^national university of singapore|^national university of singapore,|national university of singapore$)\\b""), "
"0","                              yes = ""national university of singapore"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^fudan|fudan university$|fudan university)\\b""), "
"0","                              yes = ""fudan university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^boston university|boston university$)\\b""), "
"0","                              yes = ""boston university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^arizona state|^arizona state,|arizona state university$|arizona state$)\\b""), "
"0","                              yes = ""arizona state university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^mcgill|mcgill university$|mcgill$)\\b""), "
"0","                              yes = ""mcgill university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^oregon state|^oregon state,|oregon state university$|oregon state$)\\b""), "
"0","                              yes = ""oregon state university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^stony brook|stony brook university$|stony brook$|^state university of new york)\\b""), "
"0","                              yes = ""state university of new york system"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of minnesota|university of minnesota$|^university of minnesota,)\\b""), "
"0","                              yes = ""university of minnesota"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(sun yat-sen university|(?=.*sun yat-sen)(?=.*guangzhou).*|sysu|zhongda)\\b""), "
"0","                              yes = ""zhongshan university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(nsysu|(?=.*sun yat-sen)(?=.*taiwan).*|national sun yat-sen)\\b""), "
"0","                              yes = ""national sun yat-sen university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of alberta|university of alberta$|^university of alberta,)\\b""), "
"0","                              yes = ""university of alberta"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^university of wisconsin-madison|^university of wisconsin|university of wisconsin$|university of wisconsin-madison$|university of wisconsinmadison|^university of wisconsin,|^uw-madison|uw-madison$)\\b""), "
"0","                              yes = ""university of wisconsin - madison"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(^rwth aachen university|rheinisch westfalische technische hochschule aachen)\\b""), "
"0","                              yes = ""rheinisch westfälische technische hochschule aachen"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(politecnico di milano|^polytechnic institute of milan)\\b""),"
"0","                              yes = ""polytechnic institute of milan"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(delft university of technology|^tu delft)\\b""),"
"0","                              yes = ""delft university of technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(buaa|beihang university)\\b""),"
"0","                              yes = ""beijing university of aeronautics and astronautics"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(tu dresden|technische universitat dresden)\\b""),"
"0","                              yes = ""technische universität dresden"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of colorado|university of colorado boulder|university of colorado, boulder|university of colorado - boulder|university of colorado-boulder)\\b""),"
"0","                              yes = ""university of colorado at boulder"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(katholieke universiteit leuven|ku leuven)\\b""),"
"0","                              yes = ""katholieke universiteit leuven"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(eth zurich|eidgenössische technische hochschule zürich|eth zürich|swiss federal institute of technology in zurich|politecnico federale di zurigo|école polytechnique fédérale de zurich|eth zrich)\\b""),"
"0","                              yes = ""ethz - eth zurich"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of maryland|university of maryland$|university of maryland - college park)\\b""),"
"0","                              yes = ""university of maryland, college park"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(ohio state university|ohio state university$|^ohio state|osu)\\b""),"
"0","                              yes = ""ohio state university, columbus"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of tsukuba|universityof tsukuba)\\b""),"
"0","                              yes = ""tsukuba university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university at buffalo|^state university of new york$|^suny$)\\b""),"
"0","                              yes = ""state university of new york at buffalo"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(technical university of munich|tu munich)\\b""),"
"0","                              yes = ""technische universität münchen"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of freiburg|albert ludwig university of freiburg|albert-ludwigs-universitt freiburg|uni freiburg|freiburg university|albert ludwig university freiburg|university freiburg|universitt freiburg)\\b""),"
"0","                              yes = ""albert-ludwigs-universität freiburg"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(washington university in st louis|washington university in st. louis|washington university in saint louis|washington university at st. louis)\\b""),"
"0","                              yes = ""washington university, saint louis"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)((?<!it )university of copenhagen)\\b""),"
"0","                              yes = ""copenhagen university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(ghent university|ugent)\\b""),"
"0","                              yes = ""universiteit gent"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(newcastle university|university of newcastle)\\b""),"
"0","                              yes = ""university of newcastle-upon-tyne"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(international institute of information technology hyderabad|iiit hyderabad|iiit-hyderabad)\\b""),"
"0","                              yes = ""international institute of information technology, hyderabad"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(epfl)\\b""),"
"0","                              yes = ""epfl - epf lausanne"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(uestc)\\b""),"
"0","                              yes = ""university of electronic science and technology of china"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(bupt)\\b""),"
"0","                              yes = ""beijing university of posts and telecommunications"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(ustc)\\b""),"
"0","                              yes = ""university of science and technology of china"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(kaist)\\b""),"
"0","                              yes = ""korea advanced institute of science & technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(epitech)\\b""),"
"0","                              yes = ""ecole pour l'informatique et les nouvelles technologies"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(mipt)\\b""),"
"0","                              yes = ""moscow institute of physics and technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(hkust)\\b""),"
"0","                              yes = ""hong kong university of science and technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(caltech)\\b""),"
"0","                              yes = ""california institute technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(scut)\\b""),"
"0","                              yes = ""south china university of technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(unicamp)\\b""),"
"0","                              yes = ""universidade estadual de campinas"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(feup)\\b""),"
"0","                              yes = ""universidade do porto"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(king's college london)\\b""),"
"0","                              yes = ""king's college london, university of london"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(karlsruhe institute of technology)\\b""),"
"0","                              yes = ""karlsruher institut für technologie"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(nus)\\b""),"
"0","                              yes = ""national university of singapore"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(ntnu)\\b""),"
"0","                              yes = ""norwegian university of science and technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(tu berlin|technische universitat berlin)\\b""),"
"0","                              yes = ""technische universität berlin"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(tu darmstadt|technische universitat darmstadt)\\b""),"
"0","                              yes = ""technische universität darmstadt"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(kth)\\b""),"
"0","                              yes = ""kth royal institute of technology"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(umass amherst)\\b""),"
"0","                              yes = ""university of massachusetts at amherst"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(pku)\\b""),"
"0","                              yes = ""peking university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(nc state university)\\b""),"
"0","                              yes = ""north carolina state university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(technische universitt mnchen|tu munchen|tu münchen|tum)\\b""),"
"0","                              yes = ""technische universität münchen"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(ufmg)\\b""),"
"0","                              yes = ""universidade federal de minas gerais"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of so paulo|university of sao paulo)\\b""),"
"0","                              yes = ""universidade de são paulo"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(linkping university|linkoping university)\\b""),"
"0","                              yes = ""linköping university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of stuttgart)\\b""),"
"0","                              yes = ""universität stuttgart"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(ecnu)\\b""),"
"0","                              yes = ""east china normal university"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(universidade de brasilia|universidade de braslia)\\b""),"
"0","                              yes = ""universidade de brasília"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(university of hawaii)\\b""),"
"0","                              yes = ""university of hawaii system"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(trinity college dublin)\\b""),"
"0","                              yes = ""university of dublin, trinity college"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(cuhk)\\b""),"
"0","                              yes = ""chinese university of hong kong"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(tu wien)\\b""),"
"0","                              yes = ""technische universität wien"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(bits pilani)\\b""),"
"0","                              yes = ""birla institute of technology and science"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(hasso plattner institut|hasso-plattner-institute|hasso-plattner-institut|hasso-plattner institut|hasso plattner institute)\\b""),"
"0","                              yes = ""hasso plattner institute"", no = organization)) %>%"
"0","  dt_mutate(organization = ifelse(test = str_detect(string = organization, "
"0","                              pattern = ""\\b(?i)(whu)\\b""),"
"0","                              yes = ""wissenschaftliche hochschule für unternehmensführung, otto-beisheim hochschule"", no = organization))"
"0","# create a frequency table"
"0","org_counts <- orgs_clean %>% group_by(organization) %>% count() %>% arrange(-n) "
"0","# compare with hipo labs dataset to pull out academic institutions"
"0","institutions_hipolabs <- institutions_hipolabs %>% as.data.table() %>% dt_mutate(institution = str_to_lower(institution))"
"0","overlap <- semi_join(org_counts, institutions_hipolabs, by = c(""organization"" = ""institution""))"
"0","sum(overlap[,""n""])"
"1","[1]"
"1"," 29134"
"1","
"
"0","sum(filter(overlap, organization != ""misc. student"")[,""n""])"
"1","[1]"
"1"," 27570"
"1","
"
"0","filter(overlap, organization == ""misc. student"")$n"
"1","[1]"
"1"," 1564"
"1","
"
"0","# make a table to see what isn't caught by hipo labs"
"0","leftover <- anti_join(org_counts, overlap)"
"2","Joining, by = c(""organization"", ""n"")
"
